<template>
  <div class="page">
    <div class="navbar">
      <div class="navbar-inner sliding">
        <div class="left">
          <a href="#" class="link back">
            <i class="icon icon-back"></i>
            <span class="ios-only">Back</span>
          </a>
        </div>
        <div class="title">{{$route.params.title}}</div>
      </div>
    </div>
    <div class="page-content">
      <img class="responsive" src="img/back.jpg" />
      <div class="swiper-container">
        <div class="swiper-wrapper">
        </div>
      </div>
    </div>
  </div>
</template>
<script>
  return {
    // Page Events
    on: {
      pageInit: function(e, page) {
      
        var swiper = app.swiper.create('.swiper-container', {
          speed: 400,
          spaceBetween: 0
        });

        var db = self.$app.data.db;
        var bab = self.$route.params.anu;
        //console.log('bab: ', bab)
        self.$app.dialog.alert('bab: ' + bab);
    
        if (db) {
        
          db.transaction(function(tx) {
            
            tx.executeSql('select bab, ayat, sloka, indo, favorit from book where bab = ? order by ayat;', [bab], function(ignored, res) {
              
              //var sloka = [];
              
              for (var i = 0; i < res.rows.length; i++) {
                var html = '<div class="swiper-slide">' + res.rows.item(0).indo + '</div>'
                //sloka.push(html);
                swiper.appendSlide(html);
              }
            });
          }, function(error) {
            //app.preloader.hide();
            self.$app.dialog.alert('select error: ' + error.message);
          });
        }
        //swiper.appendSlide(sloka);
      }
    }
  }
</script>
